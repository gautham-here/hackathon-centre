{% extends 'base.html' %}
{% block content %}
<h1 class="h4 fw-bold mb-3">Pending Submissions</h1>
{% if pendings|length == 0 %}
  <div class="alert alert-success">No pending items. ðŸŽ‰</div>
{% endif %}
<div class="vstack gap-3">
  {% for e in pendings %}
  <div class="card border-0 shadow-sm">
    <div class="card-body">
      <div class="d-flex justify-content-between align-items-start">
        <div>
          <div class="fw-bold">{{ e.title }}</div>
          <div class="small text-muted">{{ e.start_dt }} â†’ {{ e.end_dt }} Â· {{ e.mode }}</div>
        </div>
        <div class="d-flex gap-2">
          <form method="post" action="{{ url_for('approve', event_id=e.id) }}">
            <button class="btn btn-success btn-sm">Approve</button>
          </form>
          <form method="post" action="{{ url_for('reject', event_id=e.id) }}">
            <button class="btn btn-outline-danger btn-sm">Reject</button>
          </form>
        </div>
      </div>
      <hr>
      <div class="row g-2 small">
        <div class="col-md-3"><span class="text-muted">Reg deadline:</span> {{ e.reg_deadline or 'â€”' }}</div>
        <div class="col-md-3"><span class="text-muted">Team size:</span> {{ e.team_min or '?' }}â€“{{ e.team_max or '?' }}</div>
        <div class="col-md-3"><span class="text-muted">Intercollege:</span> {{ 'Yes' if e.intercollege else 'No' }}</div>
        <div class="col-md-3"><span class="text-muted">Venue:</span> {{ e.venue or 'â€”' }}</div>
      </div>
      {% if e.description %}<p class="mt-2 mb-0">{{ e.description }}</p>{% endif %}
      {% if e.rounds and e.rounds|length %}
        <div class="mt-3">
          <div class="fw-semibold">Rounds</div>
          <ul class="list-group list-group-flush">
            {% for r in e.rounds %}
            <li class="list-group-item small">
              <span class="fw-semibold">{{ r.name or 'Round ' ~ loop.index }}:</span>
              {{ r.date }} {{ r.time }} {% if r.venue %} Â· {{ r.venue }}{% endif %}
              {% if r.desc %}<div class="text-muted">{{ r.desc }}</div>{% endif %}
            </li>
            {% endfor %}
          </ul>
        </div>
      {% endif %}
      {% if e.extra and e.extra|length %}
        <div class="mt-3">
          <div class="fw-semibold">Extra</div>
          <div class="row g-2">
            {% for k,v in e.extra.items() %}
              <div class="col-md-3"><span class="text-muted">{{ k }}:</span> {{ v }}</div>
            {% endfor %}
          </div>
        </div>
      {% endif %}
    </div>
  </div>
  {% endfor %}
</div>
{% endblock %}
